<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Alertes-leboncoin by maximelebreton</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Alertes-leboncoin</h1>
      <h2 class="project-tagline">Recevez par email vos recherches leboncoin.fr (via Google Sheets / App Script)</h2>
      <a href="https://github.com/maximelebreton/alertes-leboncoin" class="btn">View on GitHub</a>
      <a href="https://github.com/maximelebreton/alertes-leboncoin/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/maximelebreton/alertes-leboncoin/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="alertes-leboncoinfr---432" class="anchor" href="#alertes-leboncoinfr---432" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Alertes leboncoin.fr - 4.3.2</h1>

<p>Recevez par email vos recherches leboncoin.fr (via Google Sheets / App Script)</p>

<div><img src="https://raw.githubusercontent.com/maximelebreton/alertes-leboncoin/master/main.png"></div>

<hr>

<p><strong>Prérequis :</strong> <em>vous devez avoir un compte Google et y être connecté.</em></p>

<h2>
<a id="installation-en-4-étapes" class="anchor" href="#installation-en-4-%C3%A9tapes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation en 4 étapes</h2>

<ol>
<li><p><strong>Créez une copie</strong> de cette feuille de calcul : <a href="https://docs.google.com/spreadsheet/ccc?key=1oruKJqdbEjg0z28K83hsqIKbaL2weBMqmA8lG0gYIfw&amp;newcopy">https://docs.google.com/spreadsheet/ccc?key=1oruKJqdbEjg0z28K83hsqIKbaL2weBMqmA8lG0gYIfw&amp;newcopy</a></p></li>
<li><p><strong>Renseignez votre adresse email</strong> dans l'onglet <code>Variables</code> en bas du document   <img src="https://cloud.githubusercontent.com/assets/1072425/16684136/b324aec6-4503-11e6-861c-f403d3886f18.png" alt="image"></p></li>
<li><p>Pour que le script soit executé de manière automatique, vous devez <strong>programmer un trigger</strong>* sur la fonction <strong><code>alertesLeBonCoin</code></strong>.<br>
(Dans <code>Outils &gt; Éditeur de scripts</code>, puis <code>Ressources &gt; Déclencheurs du script actuel</code>).<br>
* <em>il est vivement conseillé de ne pas aller en dessous de <code>toutes les 2 heures</code>.</em></p></li>
<li><p>Pour chaque requête que vous souhaitez effectuer sur leboncoin.fr, <strong>copiez/collez son url</strong> dans la colonne <code>Url</code> (une url par ligne). </p></li>
<li><p><strong>Voilà !</strong> Vous pouvez faire un test en cliquant sur <code>Alertes LeBonCoin &gt; Lancer manuellement</code>. (une autorisation vous sera demandée lors du premier lancement)  </p></li>
</ol>

<h2>
<a id="obtenir-la-dernière-mise-à-jour" class="anchor" href="#obtenir-la-derni%C3%A8re-mise-%C3%A0-jour" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Obtenir la dernière mise à jour</h2>

<p>Dans la feuille de calcul, aller dans <code>Outils &gt; Editeur de scripts</code>, puis <code>Ressources &gt; Bibliothèques</code>, choisissez la version la plus récente, puis <strong>cliquez sur Enregistrer</strong>.  </p>

<hr>

<p><img src="https://cloud.githubusercontent.com/assets/1072425/16683980/c0f5a8f8-4502-11e6-8bd3-1fd437a57fde.png" alt="image"></p>

<hr>

<p><img src="https://cloud.githubusercontent.com/assets/1072425/16684012/e90b0554-4502-11e6-8c2b-64d41a4ce346.png" alt="image"></p>

<hr>

<p><img src="https://cloud.githubusercontent.com/assets/1072425/16684050/27f7cdec-4503-11e6-8dff-15b9b76e4c4d.png" alt="image"></p>

<hr>

<h2>
<a id="paramètres-utilisateurs" class="anchor" href="#param%C3%A8tres-utilisateurs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Paramètres utilisateurs</h2>

<p>Pour indiquer vos propres paramètres, utiliser la variable <code>userParams</code> (dans la feuille de calcul : <code>Outils &gt; Editeur de scripts</code>)
exemple :</p>

<pre><code>var userParams = {
  showMap: true,
  groupedResults: false
}
</code></pre>

<p>vous pouvez retrouver les paramètres par défaut par ici : <a href="https://github.com/maximelebreton/alertes-leboncoin/blob/master/Code.gs#L9">https://github.com/maximelebreton/alertes-leboncoin/blob/master/Code.gs#L9</a></p>

<h2>
<a id="un-problème-" class="anchor" href="#un-probl%C3%A8me-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Un problème ?</h2>

<p><strong>Avant de vous inquiéter :</strong><br>
1. vérifiez que votre <strong>adresse email est bien renseignée</strong> et qu'elle ne contient pas de caractères spéciaux (oui, même le +...)<br>
2. vérifiez que votre <strong><a href="#obtenir-la-derni%C3%A8re-mise-%C3%A0-jour">version est bien à jour</a></strong> (et n'oubliez pas de cliquer sur enregistrer lors du changement)<br>
3. si ça ne fonctionne toujours pas, et que vous ne savez pas pourquoi, tentez une <strong><a href="#installation-en-4-%C3%A9tapes">réinstallation complète</a></strong><br>
4. si le problème n'est pas déjà signalé, je vous invite à <strong><a href="https://github.com/maximelebreton/alertes-leboncoin/issues">créer une issue</a></strong>  </p>

<h2>
<a id="pourquoi-ce-fork-" class="anchor" href="#pourquoi-ce-fork-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pourquoi ce fork ?</h2>

<p><strong>TL DR;</strong></p>

<ul>
<li>refonte totale du code</li>
<li>intégration de <a href="https://github.com/3846masa/cheerio-gasify">cheerio</a> (équivalent de jquery côté serveur)</li>
<li>
<strong>mise à jour semi-automatique du code</strong> (<code>Outils &gt; Editeur de scripts</code>, puis <code>Ressources &gt; Bibliothèques</code> pour choisir la version)</li>
<li>ajout de paramètres utilisateur</li>
<li>ajout d'une mini carte pour localiser rapidement l'annonce (<code>showMap</code>)</li>
<li>possibilité de choisir l'envoi des résultats en mails individuels ou en mail groupé (<code>groupedResults</code>)</li>
<li>Markup HTML externalisé dans des fichiers <code>.html</code> gérés par <a href="https://developers.google.com/apps-script/guides/html/templates">HTML service</a>
</li>
</ul>

<h4>
<a id="-vision-et-évolutions-futures-de-la-version-4x-" class="anchor" href="#-vision-et-%C3%A9volutions-futures-de-la-version-4x-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>&gt; <a href="https://github.com/maximelebreton/alertes-leboncoin/issues/2">Vision et évolutions futures de la version 4.x ?</a>
</h4>

<h2>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changelog</h2>

<ul>
<li>
<strong>4.3.2</strong> : améliorations du comportement de l'email </li>
<li>
<strong>4.3.1</strong> : email responsive + modifications visuelles</li>
<li>
<strong>4.3.0</strong> :

<ul>
<li>utilisation des <a href="https://developers.google.com/apps-script/guides/html/templates">templates</a> pour faciliter la maintenance du markup des emails</li>
<li>ajout du résumé des annonces dans l'aperçu du mail (mailPreheaderTemplate.html)</li>
<li>ajout d'un placeholder lorsqu'aucune photo n'est disponible</li>
</ul>
</li>
<li>
<strong>4.2.1</strong> : 

<ul>
<li>Correction d'un bug lié à l'affichage des cartes <a href="https://github.com/maximelebreton/alertes-leboncoin/issues/3">#3</a>
</li>
<li>Ajout d'une fonction de tri pour que le mail envoyé ne contienne que les dernières annonces même lorsque l'on trie par prix.</li>
</ul>
</li>
<li>
<strong>4.2.0</strong> : 

<ul>
<li>Changement de l'algorithme de détection des dernières annonces (anciennement basé sur un id, et remplacé par un timestamp qui est la combinaison de la date et l'id)</li>
<li>Améliorations visuelles (la progression est maintenant visible)</li>
<li>Ajout d'une notification en bas de mail lorsqu'une mise à jour est disponible</li>
</ul>
</li>
<li>
<strong>4.1.5</strong> : modification du titre des emails envoyés</li>
<li>
<strong>4.1.4</strong> : ajout d'un footer</li>
<li>
<strong>4.1.3</strong> : Correction d'un bug lié aux paramètres utilisateurs qui n'étaient pas correctement étendus (extend VS deepExtend)</li>
<li>
<strong>4.1.2</strong> : Corrections de bugs, amélioration considérable des performances, données normalisées, et ajout de la possibilité de recevoir des mails individuels</li>
<li>
<strong>4.0</strong> : version initiale du projet (bêta)</li>
</ul>

<hr>

<p>v1.x par <a href="http://justdocsit.blogspot.fr">http://justdocsit.blogspot.fr</a><br>
v4.x par <a href="http://www.maximelebreton.com">mlb</a>  </p>

<p><strong>Clé projet de la bilbiothèque :</strong> <code>M9iNq7X9ZWxS_D7pHmMGBb6YoFnfw0_Hk</code></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/maximelebreton/alertes-leboncoin">Alertes-leboncoin</a> is maintained by <a href="https://github.com/maximelebreton">maximelebreton</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
