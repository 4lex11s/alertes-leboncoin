<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Alertes leboncoin by maximelebreton</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Alertes leboncoin</h1>
      <h2 class="project-tagline">Recevez par email vos recherches leboncoin.fr (via Google Sheets / App Script)</h2>
      <a href="https://goo.gl/Awjw5f" class="btn" target="_blank">Créer ma feuille d'Alertes, maintenant.</a>
      <div><small><strong>Prérequis :</strong> <em>vous devez avoir un compte Google et y être connecté.</em></small></div>
    </section>

    <section class="main-content">
      <h1>
<a id="alertes-leboncoin---504" class="anchor" href="#alertes-leboncoin---504" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Alertes leboncoin - 5.0.4</h1>

<p>Recevez par email vos recherches leboncoin.fr (via Google Sheets / App Script)</p>

<div><img src="https://raw.githubusercontent.com/maximelebreton/alertes-leboncoin/master/main.png"></div>

<hr>

<h2>
<a id="pour-commencer" class="anchor" href="#pour-commencer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pour commencer</h2>

<p><strong>Prérequis :</strong> <em>vous devez avoir un compte Google et y être connecté.</em></p>

<ol>
<li><p><strong>Créez <a href="https://goo.gl/Awjw5f">votre copie de la feuille de calcul <em>Alertes leboncoin</em></a></strong>  </p></li>
<li><p><strong>Indiquez votre email dans les <em>Paramètres utilisateur</em>, et <em>lancez manuellement</em> votre première recherche via le menu <em>Alertes LeBonCoin</em>.</strong>  </p></li>
<li><p><strong>Pour être averti <em>automatiquement</em> des prochains résultats, réglez la <em>fréquence</em> à laquelle vous souhaitez être averti via le menu <em>Planification des alertes</em>.</strong></p></li>
</ol>

<h2>
<a id="comment-ça-fonctionne-" class="anchor" href="#comment-%C3%A7a-fonctionne-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Comment ça fonctionne ?</h2>

<p>C'est très simple, dans la <strong>feuille</strong> intitulée <code>Vos alertes</code>, <strong>chaque ligne correspond à une recherche</strong> :</p>

<ul>
<li>Pour chaque recherche que vous souhaitez effectuer sur <a href="https://www.leboncoin.fr">leboncoin.fr</a>, il suffit simplement d'en <strong>copier/coller le lien</strong> dans la colonne prévue à cet effet.</li>
</ul>

<p>Les colonnes :</p>

<table>
<thead>
<tr>
<th></th>
<th><em>description</em></th>
<th><em>remarque</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Lien</strong></td>
<td><em>l'url de votre recherche</em></td>
<td><em><code>obligatoire</code></em></td>
</tr>
<tr>
<td><strong>Titre</strong></td>
<td><em>le titre de votre recherche</em></td>
<td><em><code>obligatoire</code></em></td>
</tr>
<tr>
<td><strong>Dernière annonce</strong></td>
<td><em>indique la date du dernier résultat qui vous a été envoyé par email</em></td>
<td><em><code>automatique</code></em></td>
</tr>
<tr>
<td><strong>Options avancées</strong></td>
<td><em>est un champ qui s'adresse aux utilisateurs avancés</em></td>
<td><em><code>facultatif</code></em></td>
</tr>
</tbody>
</table>

<h2>
<a id="paramètres-utilisateurs" class="anchor" href="#param%C3%A8tres-utilisateurs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Paramètres utilisateurs</h2>

<p>Dans la <strong>feuille</strong> intitulée <code>Paramètres utilisateurs</code>, acessible également via le menu <em>Alertes LeBonCoin</em>.</p>

<table>
<thead>
<tr>
<th>Paramètres</th>
<th>Valeurs</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>email</code></td>
<td>
<code>mon@email.com</code> (exemple)</td>
<td><em>l'adresse à laquelle sera envoyée les annonces</em></td>
</tr>
<tr>
<td><code>showMap</code></td>
<td>
<code>=true</code> ou <code>=false</code>
</td>
<td><em>affiche une mini carte</em></td>
</tr>
<tr>
<td><code>mapZoom</code></td>
<td>nombre de <code>=0</code> à <code>=17</code>
</td>
<td><em>règle le niveau de zoom de la carte</em></td>
</tr>
<tr>
<td><code>showTags</code></td>
<td>
<code>=true</code> ou <code>=false</code>
</td>
<td><em>(experimental) affiche les critères de recherche</em></td>
</tr>
<tr>
<td><code>groupedResults</code></td>
<td>
<code>=true</code> ou <code>=false</code>
</td>
<td><em>permet de grouper les résultats dans un seul mail</em></td>
</tr>
</tbody>
</table>

<h3>
<a id="paramètres-utilisateurs-avancés" class="anchor" href="#param%C3%A8tres-utilisateurs-avanc%C3%A9s" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Paramètres utilisateurs avancés</h3>

<p>Pour les utilisateurs avancés, l'objet <code>userParams</code> permet de personnaliser la totalité des <a href="https://github.com/maximelebreton/alertes-leboncoin/blob/master/Code.gs#L7">variables de la librairie</a> (dans la feuille de calcul : <code>Outils &gt; Editeur de scripts</code>)<br>
Exemple :</p>

<pre><code>var userParams = {
  startIndex: 2,
  names: {
    sheet: {
      main: 'Vos alertes'
    }
  }
}
</code></pre>

<h3>
<a id="options-avancées" class="anchor" href="#options-avanc%C3%A9es" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Options avancées</h3>

<p>Il est possible de spécifier les options <code>email</code>, <code>showMap</code> et <code>mapZoom</code> pour chaque recherche dans la colonne <code>Options avancées</code> en passant un <code>objet JSON</code> stringifié.<br>
Exemple : </p>

<pre><code>{"email":"autre@email.com","showMap":true,"mapZoom":9}
</code></pre>

<h2>
<a id="obtenir-la-dernière-mise-à-jour" class="anchor" href="#obtenir-la-derni%C3%A8re-mise-%C3%A0-jour" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Obtenir la dernière mise à jour</h2>

<p>Dans la feuille de calcul, aller dans <code>Outils &gt; Editeur de scripts</code>, puis <code>Ressources &gt; Bibliothèques</code>, choisissez la version la plus récente, puis <strong>cliquez sur Enregistrer</strong>.  </p>

<p><img src="https://raw.githubusercontent.com/maximelebreton/alertes-leboncoin/master/update.gif"></p>

<h2>
<a id="un-problème-" class="anchor" href="#un-probl%C3%A8me-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Un problème ?</h2>

<p><strong>Avant de vous inquiéter :</strong><br>
1. vérifiez que votre <strong>adresse email est bien renseignée</strong> et qu'elle ne contient pas de caractères spéciaux (oui, même le +...)<br>
2. vérifiez que votre <strong><a href="#obtenir-la-derni%C3%A8re-mise-%C3%A0-jour">version est bien à jour</a></strong> (et n'oubliez pas de cliquer sur enregistrer lors du changement)<br>
3. si ça ne fonctionne toujours pas, et que vous ne savez pas pourquoi, tentez une <strong><a href="#pour-commencer">réinstallation complète</a></strong><br>
4. si le problème n'est pas déjà signalé, je vous invite à <strong><a href="https://github.com/maximelebreton/alertes-leboncoin/issues">créer une issue</a></strong>  </p>

<h2>
<a id="pourquoi-ce-fork-" class="anchor" href="#pourquoi-ce-fork-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pourquoi ce fork ?</h2>

<p><strong>TL DR;</strong></p>

<ul>
<li>refonte totale du code</li>
<li>intégration de <a href="https://github.com/3846masa/cheerio-gasify">cheerio</a> (équivalent de jquery côté serveur)</li>
<li>
<strong>mise à jour semi-automatique du code</strong> (<code>Outils &gt; Editeur de scripts</code>, puis <code>Ressources &gt; Bibliothèques</code> pour choisir la version)</li>
<li>ajout de paramètres utilisateur</li>
<li>ajout d'une mini carte pour localiser rapidement l'annonce (<code>showMap</code>)</li>
<li>possibilité de choisir l'envoi des résultats en mails individuels ou en mail groupé (<code>groupedResults</code>)</li>
<li>Markup HTML externalisé dans des fichiers <code>.html</code> gérés par <a href="https://developers.google.com/apps-script/guides/html/templates">HTML service</a>
</li>
</ul>

<h4>
<a id="-vision-et-évolutions-futures-de-la-version-4x-" class="anchor" href="#-vision-et-%C3%A9volutions-futures-de-la-version-4x-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>&gt; <a href="https://github.com/maximelebreton/alertes-leboncoin/issues/2">Vision et évolutions futures de la version 4.x ?</a>
</h4>

<h2>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changelog</h2>

<ul>
<li>
<strong>5.0.4</strong> Les autorisations d'accès sont maintenant limitées au document (par défaut, cela demandait un accès total !)</li>
<li>
<strong>5.0.2</strong> Léger refactoring du code</li>
<li>
<strong>5.0.0</strong> :

<ul>
<li>Ajout d'un menu <code>Planification des alertes</code> permettant de paramétrer directement le déclencheur</li>
<li>Ajout d'une colonne <code>Options avancées</code>
</li>
<li>Possibilité de définir un email par recherche via les <code>Options avancées</code>
</li>
<li>Paramètres utilisateurs à présent modifiables directement dans la feuille de calcul</li>
<li>Centralisation des styles CSS de l'email dans inlineStyles.gs</li>
<li>Ajout d'un libellé 'pro' pour les annonces professionelles</li>
</ul>
</li>
<li>
<strong>4.3.2</strong> : améliorations du comportement de l'email </li>
<li>
<strong>4.3.1</strong> : email responsive + modifications visuelles</li>
<li>
<strong>4.3.0</strong> :

<ul>
<li>utilisation des <a href="https://developers.google.com/apps-script/guides/html/templates">templates</a> pour faciliter la maintenance du markup des emails</li>
<li>ajout du résumé des annonces dans l'aperçu du mail (mailPreheaderTemplate.html)</li>
<li>ajout d'un placeholder lorsqu'aucune photo n'est disponible</li>
</ul>
</li>
<li>
<strong>4.2.1</strong> : 

<ul>
<li>Correction d'un bug lié à l'affichage des cartes <a href="https://github.com/maximelebreton/alertes-leboncoin/issues/3">#3</a>
</li>
<li>Ajout d'une fonction de tri pour que le mail envoyé ne contienne que les dernières annonces même lorsque l'on trie par prix.</li>
</ul>
</li>
<li>
<strong>4.2.0</strong> : 

<ul>
<li>Changement de l'algorithme de détection des dernières annonces (anciennement basé sur un id, et remplacé par un timestamp qui est la combinaison de la date et l'id)</li>
<li>Améliorations visuelles (la progression est maintenant visible)</li>
<li>Ajout d'une notification en bas de mail lorsqu'une mise à jour est disponible</li>
</ul>
</li>
<li>
<strong>4.1.5</strong> : modification du titre des emails envoyés</li>
<li>
<strong>4.1.4</strong> : ajout d'un footer</li>
<li>
<strong>4.1.3</strong> : Correction d'un bug lié aux paramètres utilisateurs qui n'étaient pas correctement étendus (extend VS deepExtend)</li>
<li>
<strong>4.1.2</strong> : Corrections de bugs, amélioration considérable des performances, données normalisées, et ajout de la possibilité de recevoir des mails individuels</li>
<li>
<strong>4.0</strong> : version initiale du projet (bêta)</li>
</ul>

<hr>

<p>v1.x par <a href="http://justdocsit.blogspot.fr">http://justdocsit.blogspot.fr</a><br>
v4.x par <a href="http://www.maximelebreton.com">mlb</a>  </p>

<p><strong>Clé projet de la bilbiothèque :</strong> <code>M9iNq7X9ZWxS_D7pHmMGBb6YoFnfw0_Hk</code><br>
<strong>Accéder au code de la bibliothèque:</strong> : <a href="https://script.google.com/macros/library/versions/d/15GE-TW-COB9rfq49nF38GDqytbwpK2HMxLQOzdC1JZMGkUCfLqWoG0T4">https://script.google.com/macros/library/versions/d/15GE-TW-COB9rfq49nF38GDqytbwpK2HMxLQOzdC1JZMGkUCfLqWoG0T4</a></p>

<h2>
<a id="laisser-un-commentaire" class="anchor" href="#laisser-un-commentaire" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#disqus_thread">Laisser un commentaire</a>
</h2>

<div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//alertesleboncoin.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                    


      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/maximelebreton/alertes-leboncoin">Alertes leboncoin</a> is maintained by <a href="https://github.com/maximelebreton">maximelebreton</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

<a href="#disqus_thread" class="btn disqus-comment-count" data-disqus-url="http://maximelebreton.github.io/alertes-leboncoin" style="color: #606c71; position: fixed; bottom: 0; right: 0;  margin-bottom: 0; background: rgba(255,255,255,0.8); width: auto;  border-color: #ddd; border-bottom: 0;  border-right: 0; border-radius: 0;"><span class="notification-icon icon-comment" aria-hidden=""></span>Commentaires</a>
<script id="dsq-count-scr" src="//alertesleboncoin.disqus.com/count.js" async></script>
  
  </body>
</html>
